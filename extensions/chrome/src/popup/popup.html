<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>RealityCheck</title>
  <link rel="stylesheet" href="popup.css" />
</head>
<body>
  <header>
    <img src="../icons/icon48.png" alt="" class="logo" />
    <div class="title-block">
      <h1>RealityCheck</h1>
      <p class="subtitle">AI Content Watermarker</p>
    </div>
    <!-- Global toggle -->
    <label class="toggle" title="Enable/disable globally">
      <input type="checkbox" id="globalEnabled" />
      <span class="slider"></span>
    </label>
  </header>

  <section class="card">
    <h2>This site</h2>
    <div class="row">
      <span>Enable on <strong id="siteHost"></strong></span>
      <label class="toggle">
        <input type="checkbox" id="siteEnabled" />
        <span class="slider"></span>
      </label>
    </div>
  </section>

  <section class="card">
    <h2>Detection</h2>

    <label>
      Quality
      <select id="detectionQuality">
        <option value="low">Low â€” Fastest, basic checks</option>
        <option value="medium" selected>Medium â€” Balanced (recommended)</option>
        <option value="high">High â€” Most accurate, uses more resources</option>
      </select>
    </label>

    <div class="row" style="margin-top:8px">
      <span>Remote classification <small>(recommended)</small></span>
      <label class="toggle">
        <input type="checkbox" id="remoteEnabled" />
        <span class="slider"></span>
      </label>
    </div>
    <p id="remoteOffNote" class="privacy-notice hidden">
      âš  Remote classification is off. For best results, use Medium or High quality.
    </p>
    <p class="privacy-notice" id="remoteOnNote">
      Content that passes local pre-screening is sent to our hosted classifier.
      No API key required.
    </p>
  </section>

  <section class="card">
    <h2>Watermark behaviour</h2>

    <label>
      Mode
      <select id="watermarkMode">
        <option value="static">Static (always visible)</option>
        <option value="flash">Flash (brief, then fades)</option>
        <option value="pulse">Pulse (fades in/out)</option>
        <option value="auto-hide">Auto-hide (hover to reveal)</option>
      </select>
    </label>

    <label>
      Position
      <select id="watermarkPosition">
        <option value="center">Center</option>
        <option value="top-left">Top left</option>
        <option value="top-right">Top right</option>
        <option value="bottom">Bottom</option>
      </select>
    </label>

    <label>
      Opacity: <span id="opacityValue">70</span>%
      <input type="range" id="watermarkOpacity" min="10" max="100" step="5" value="70" />
    </label>

    <label>
      Animation duration: <span id="animDurValue">1500</span>ms
      <input type="range" id="animDuration" min="500" max="5000" step="100" value="1500" />
    </label>

    <label>
      Pulse frequency: <span id="pulseFreqValue">3000</span>ms
      <input type="range" id="pulseFreq" min="1000" max="10000" step="500" value="3000" />
    </label>
  </section>

  <section class="card">
    <h2>Report feedback</h2>
    <p class="disclaimer">Detection is probabilistic and may be incorrect.</p>
    <div class="report-buttons">
      <button id="reportFP" class="btn btn-secondary">Report false positive</button>
      <button id="reportFN" class="btn btn-secondary">Report missed AI</button>
    </div>
    <p id="reportStatus" class="report-status hidden">Thank you for your feedback!</p>
  </section>

  <!-- Advanced section (collapsed by default â€” for development use) -->
  <details class="card advanced-section">
    <summary>Advanced settings</summary>
    <label>
      Remote endpoint override <small>(leave blank for default)</small>
      <input type="url" id="remoteEndpoint" placeholder="https://api.realitycheck.ai/v1/classify" />
    </label>
    <label>
      API key <small>(only needed for custom endpoints)</small>
      <input type="password" id="remoteApiKey" placeholder="Optional" autocomplete="off" />
    </label>
    <div class="row" style="margin-top:8px">
      <span>Dev Mode <small style="color:#e67e22">âš  Force-watermark all media (testing only)</small></span>
      <label class="toggle">
        <input type="checkbox" id="devMode" />
        <span class="slider"></span>
      </label>
    </div>
    <p id="devModeNote" class="privacy-notice hidden" style="color:#e67e22">
      ðŸ›  Dev Mode ON â€” every image &amp; video will show a green watermark regardless of AI detection. Disable before normal use.
    </p>
  </details>

  <footer>
    <span>RealityCheck v1.0.0</span>
  </footer>

  <script src="popup.js" type="module"></script>
</body>
</html>
